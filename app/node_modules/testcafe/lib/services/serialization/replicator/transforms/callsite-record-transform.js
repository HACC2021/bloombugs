"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const prerender_callsite_1 = __importDefault(require("../../../../utils/prerender-callsite"));
const base_transform_1 = __importDefault(require("./base-transform"));
const constants_1 = require("../../../../test-run/execute-js-expression/constants");
const CALLSITE_RECORD_CLASS_NAME = 'CallsiteRecord';
class CallsiteRecordTransform extends base_transform_1.default {
    constructor() {
        super(CALLSITE_RECORD_CLASS_NAME);
    }
    shouldTransform(_, val) {
        return !!val &&
            (!!val.constructor && val.constructor.name === CALLSITE_RECORD_CLASS_NAME) &&
            (!!val.filename && val.filename !== constants_1.ERROR_FILENAME); // Don't serialize callsites for RAW API)
    }
    toSerializable(callsite) {
        return prerender_callsite_1.default(callsite);
    }
}
exports.default = CallsiteRecordTransform;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsbHNpdGUtcmVjb3JkLXRyYW5zZm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9zZXJpYWxpemF0aW9uL3JlcGxpY2F0b3IvdHJhbnNmb3Jtcy9jYWxsc2l0ZS1yZWNvcmQtdHJhbnNmb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsOEZBQTJGO0FBQzNGLHNFQUE2QztBQUM3QyxvRkFBc0Y7QUFNdEYsTUFBTSwwQkFBMEIsR0FBRyxnQkFBZ0IsQ0FBQztBQUVwRCxNQUFxQix1QkFBd0IsU0FBUSx3QkFBYTtJQUM5RDtRQUNJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFTSxlQUFlLENBQUUsQ0FBVSxFQUFFLEdBQXVCO1FBQ3ZELE9BQU8sQ0FBQyxDQUFDLEdBQUc7WUFDUixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxLQUFLLDBCQUEwQixDQUFDO1lBQzFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSywwQkFBYyxDQUFDLENBQUMsQ0FBQyx5Q0FBeUM7SUFDdEcsQ0FBQztJQUVNLGNBQWMsQ0FBRSxRQUF3QjtRQUMzQyxPQUFPLDRCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7Q0FDSjtBQWRELDBDQWNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FsbHNpdGVSZWNvcmQgfSBmcm9tICdjYWxsc2l0ZS1yZWNvcmQnO1xuaW1wb3J0IHByZXJlbmRlckNhbGxzaXRlLCB7IFJlbmRlcmVkQ2FsbHNpdGUgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9wcmVyZW5kZXItY2FsbHNpdGUnO1xuaW1wb3J0IEJhc2VUcmFuc2Zvcm0gZnJvbSAnLi9iYXNlLXRyYW5zZm9ybSc7XG5pbXBvcnQgeyBFUlJPUl9GSUxFTkFNRSB9IGZyb20gJy4uLy4uLy4uLy4uL3Rlc3QtcnVuL2V4ZWN1dGUtanMtZXhwcmVzc2lvbi9jb25zdGFudHMnO1xuXG5pbnRlcmZhY2UgQ2FsbHNpdGVSZWNvcmRMaWtlIHtcbiAgICBmaWxlbmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBDQUxMU0lURV9SRUNPUkRfQ0xBU1NfTkFNRSA9ICdDYWxsc2l0ZVJlY29yZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbGxzaXRlUmVjb3JkVHJhbnNmb3JtIGV4dGVuZHMgQmFzZVRyYW5zZm9ybSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgc3VwZXIoQ0FMTFNJVEVfUkVDT1JEX0NMQVNTX05BTUUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaG91bGRUcmFuc2Zvcm0gKF86IHVua25vd24sIHZhbDogQ2FsbHNpdGVSZWNvcmRMaWtlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXZhbCAmJlxuICAgICAgICAgICAgKCEhdmFsLmNvbnN0cnVjdG9yICYmIHZhbC5jb25zdHJ1Y3Rvci5uYW1lID09PSBDQUxMU0lURV9SRUNPUkRfQ0xBU1NfTkFNRSkgJiZcbiAgICAgICAgICAgICghIXZhbC5maWxlbmFtZSAmJiB2YWwuZmlsZW5hbWUgIT09IEVSUk9SX0ZJTEVOQU1FKTsgLy8gRG9uJ3Qgc2VyaWFsaXplIGNhbGxzaXRlcyBmb3IgUkFXIEFQSSlcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9TZXJpYWxpemFibGUgKGNhbGxzaXRlOiBDYWxsc2l0ZVJlY29yZCk6IFJlbmRlcmVkQ2FsbHNpdGUge1xuICAgICAgICByZXR1cm4gcHJlcmVuZGVyQ2FsbHNpdGUoY2FsbHNpdGUpO1xuICAgIH1cbn1cbiJdfQ==